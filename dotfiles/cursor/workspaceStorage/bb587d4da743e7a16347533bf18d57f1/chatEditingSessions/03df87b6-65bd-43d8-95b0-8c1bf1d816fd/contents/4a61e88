# üñ•Ô∏è Debugging y Configuraci√≥n de Drivers Gr√°ficos en Arch Linux  

## üîπ Cambiar de TTY (cuando la pantalla se congela)  
- **Ctrl + Alt + F2 (o F3, F4...)** ‚Üí Cambia a otra TTY (consola).  
- **Ctrl + Alt + Backspace** ‚Üí Mata el servidor gr√°fico actual (‚ö†Ô∏è requiere habilitarlo en Xorg; por defecto viene deshabilitado en Arch).  
- **Alt + SysRq + REISUB** ‚Üí Reinicio seguro del sistema si nada responde.  

---

## üîπ Iniciar el entorno gr√°fico manualmente  
Si no arranca el display manager:  

```bash
startx
```
O, seg√∫n el escritorio:  
```bash
gnome-session      # GNOME
startplasma-x11    # KDE Plasma
startxfce4         # XFCE
```

---

## üîπ Manejo de drivers NVIDIA  

### 1. Remover drivers de NVIDIA (en caso de conflicto)  
```bash
sudo pacman -Rns nvidia nvidia-utils nvidia-settings nvidia-dkms nvidia-lts
```

### 2. Reinstalar drivers NVIDIA con PRIME Render Offload  
```bash
sudo pacman -S nvidia nvidia-utils lib32-nvidia-utils nvidia-prime
```

---

## üîπ Configuraci√≥n del sistema  

### 1. Cargar los m√≥dulos al arranque  
Edita `/etc/mkinitcpio.conf` y en la l√≠nea `MODULES=()` a√±ade:  
```
MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)
```  
Luego regenera:  
```bash
sudo mkinitcpio -P
```

### 2. Activar KMS (Kernel Mode Setting)  
Edita `/etc/default/grub` ‚Üí en `GRUB_CMDLINE_LINUX_DEFAULT` agrega:  
```
nvidia-drm.modeset=1
```  
Ejemplo:  
```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash nvidia-drm.modeset=1"
```  
Despu√©s, regenera GRUB:  
```bash
sudo grub-mkconfig -o /boot/grub/grub.cfg
```

---

## üîπ Verificaci√≥n tras reinicio  

1. Revisar si NVIDIA est√° cargada:  
```bash
lsmod | grep nvidia
nvidia-smi
```

2. Probar PRIME Render Offload:  
```bash
prime-run glxinfo | grep "OpenGL renderer"
```
- Sin `prime-run` ‚Üí debe mostrar la GPU integrada (ej. AMD).  
- Con `prime-run` ‚Üí debe mostrar tu NVIDIA dedicada.  

---

## üîπ Caso: error `glxinfo not found`  

Instalar utilidades OpenGL:  
```bash
sudo pacman -S mesa-demos
```

Prueba luego con:  
```bash
glxinfo | grep "OpenGL renderer"
```

---

‚úÖ Con esta gu√≠a puedes:  
- Recuperar el entorno gr√°fico si se bloquea.  
- Reinstalar drivers NVIDIA en Arch.  
- Configurar PRIME Render Offload para usar NVIDIA en apps/juegos.  
- Verificar que todo funciona correctamente.  
